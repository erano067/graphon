#!/bin/sh

# Only auto-release when pushing to main
branch=$(git rev-parse --abbrev-ref HEAD)

if [ "$branch" = "main" ]; then
  # Check if there are releasable commits
  if ! npx tsx scripts/release.ts --check-only 2>/dev/null; then
    exit 0
  fi
  
  echo ""
  echo "ðŸš€ Releasable commits detected! Creating release..."
  npx tsx scripts/release.ts
  
  echo ""
  echo "ï¿½ Release commit created. Tags will be pushed after main push."
  echo "   Run 'git push --tags' if tags don't auto-push."
fi

exit 0
