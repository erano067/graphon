#!/bin/sh

# Only auto-release when pushing to main
branch=$(git rev-parse --abbrev-ref HEAD)

if [ "$branch" = "main" ]; then
  echo "ðŸš€ Auto-release: checking for version bump..."
  
  # Check if there are releasable commits
  if ! npx tsx scripts/release.ts --check-only 2>/dev/null; then
    echo "ðŸ“¦ No releasable commits, pushing normally."
    exit 0
  fi
  
  echo "ðŸš€ Creating release..."
  npx tsx scripts/release.ts
fi

# Continue with normal push (tags will be pushed separately)
exit 0
